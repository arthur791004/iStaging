{"version":3,"sources":["utils/compose.js","utils/getDisplayName.js","utils/withFadeIn.js","utils/createIntersectionObserver.js","components/Visibility/index.js","components/Visibility/withVisibility.js","constants/sizes.js","utils/media.js","components/PanoramasThumbnail/constants.js","components/PanoramasThumbnail/PanoramasThumbnail.js","components/PanoramasThumbnail/Placeholder.js","components/PanoramasThumbnail/index.js"],"names":["compose","_len","arguments","length","enhancers","Array","_key","args","reduce","a","b","apply","getDisplayName","WrappedComponent","displayName","name","withFadeIn","Placeholder","Component","WithFadeIn","_React$Component","_getPrototypeOf2","_this","classCallCheck_default","this","possibleConstructorReturn_default","getPrototypeOf_default","call","concat","state","isLoaded","loadImage","src","props","img","Image","complete","handleLoaded","setState","onload","inherits_default","createClass_default","key","value","prevProps","react_default","createElement","React","propTypes","string","DEFAULT_OPTIONS","threshold","createIntersectionObserver","handleIntersection","options","undefined","window","IntersectionObserver","entries","Visibility","visible","some","entry","isIntersecting","intersectionRatio","disconnect","observer","ref","current","unobserve","createRef","observe","children","func","withVisibility","WithVisibility","components_Visibility","_ref","extends_default","SIZES","SCREEN_BREAK_POINTS","_SCREEN_BREAK_POINTS","defineProperty_default","createMedia","sizes","mediaQuery","Object","keys","filter","mediaKey","map","join","generateMediaQuery","css","_templateObject","media","_ref2","slicedToArray_default","size","minWidth","sort","acc","_ref3","index","array","nextBreakPoint","objectSpread_default","min-width","max-width","THUMBNAIL_SIZES","_THUMBNAIL_SIZES","WIDTH","HEIGHT","Thumbnail","styled","div","attrs","style","backgroundImage","PanoramasThumbnail_templateObject","ThumbnailWrapper","_templateObject2","theme","PANORAMAS_THUMBNAIL","BORDER_COLOR","mobile","_templateObject3","Category","span","_templateObject4","TEXT_COLOR","ellipsis","normalCSS","_templateObject5","BORDER_COLOR_HOVER","activeCSS","_templateObject6","BORDER_COLOR_ACTIVE","Wrapper","_templateObject7","gap","isActive","PanoramasThumbnail","category","handleClick","onClick","bool","number","shine","keyframes","Placeholder_templateObject","PlaceholderWrapper","Placeholder_templateObject2","forwardRef"],"mappings":"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","file":"static/js/PanoramasThumbnail.1f6a1aa3.chunk.js","sourcesContent":["const compose = (...enhancers) => {\n  if (enhancers.length === 0) {\n    return args => args;\n  }\n\n  if (enhancers.length === 1) {\n    return enhancers[0];\n  }\n\n  return enhancers.reduce((a, b) => (...args) => a(b(...args)));\n};\n\nexport default compose;\n","const defaultDisplayName = 'Component';\n\nconst getDisplayName = (WrappedComponent) => {\n  const { displayName, name } = WrappedComponent;\n\n  return displayName || name || defaultDisplayName;\n};\n\nexport default getDisplayName;\n","import React from 'react';\nimport { string } from 'prop-types';\n\nimport getDisplayName from '@/utils/getDisplayName';\n\nconst withFadeIn = Placeholder => (Component) => {\n  class WithFadeIn extends React.Component {\n    state = {\n      isLoaded: false,\n    };\n\n    componentDidMount() {\n      if (this.props.src) {\n        this.loadImage();\n      }\n    }\n\n    componentDidUpdate(prevProps) {\n      if (this.props.src !== prevProps.src) {\n        this.loadImage();\n      }\n    }\n\n    loadImage = () => {\n      const { src } = this.props;\n      const img = new Image();\n\n      img.src = src;\n\n      if (img.complete) {\n        this.handleLoaded();\n      } else {\n        this.setState({ isLoaded: false });\n        img.onload = this.handleLoaded;\n      }\n    }\n\n    handleLoaded = () => {\n      this.setState({ isLoaded: true });\n    }\n\n    render() {\n      const { isLoaded } = this.state;\n\n      return isLoaded ? <Component {...this.props} /> : <Placeholder {...this.props} />;\n    }\n  }\n\n  WithFadeIn.propTypes = {\n    src: string,\n  };\n\n  WithFadeIn.displayName = `WithFadeIn(${getDisplayName(Component)})`;\n\n  return WithFadeIn;\n};\n\nexport default withFadeIn;\n","// @flow\nconst DEFAULT_THRESHOLD = 0.5;\n\nconst DEFAULT_OPTIONS = {\n  threshold: DEFAULT_THRESHOLD,\n};\n\nconst createIntersectionObserver = (handleIntersection, options = DEFAULT_OPTIONS) => {\n  const { threshold } = options;\n\n  return new window.IntersectionObserver(\n    entries => handleIntersection(entries, threshold),\n    options\n  );\n};\n\nexport default createIntersectionObserver;\n","import React from 'react';\nimport { func } from 'prop-types';\n\nimport createIntersectionObserver from '@/utils/createIntersectionObserver';\n\nclass Visibility extends React.Component {\n  state = {\n    visible: false,\n  };\n\n  componentDidMount() {\n    if (!this.ref.current) {\n      return;\n    }\n\n    this.observer = createIntersectionObserver(this.handleIntersection);\n    this.observer.observe(this.ref.current);\n  }\n\n  handleIntersection = (entries, threshold) => {\n    const isIntersection = entries.some(entry =>\n      entry.isIntersecting && entry.intersectionRatio > threshold\n    );\n\n    if (isIntersection) {\n      this.setState({ visible: true });\n      this.disconnect();\n    }\n  }\n\n  disconnect = () => {\n    if (!this.observer) {\n      return;\n    }\n\n    if (this.ref.current) {\n      this.observer.unobserve(this.ref.current);\n    }\n\n    this.observer.disconnect();\n  }\n\n  ref = React.createRef();\n\n  render() {\n    const { children } = this.props;\n    const { visible } = this.state;\n\n    return children({ visible, ref: this.ref });\n  }\n}\n\nVisibility.propTypes = {\n  children: func,\n};\n\nexport default Visibility;\n","import React from 'react';\n\nimport getDisplayName from '@/utils/getDisplayName';\nimport Visibility from './';\n\nconst withVisibility = Placeholder => (Component) => {\n  const WithVisibility = props => (\n    <Visibility>\n      {({ visible, ref }) => (visible\n        ? <Component {...props} />\n        : <Placeholder {...props} ref={ref} />\n      )}\n    </Visibility>\n  );\n\n  WithVisibility.displayName = `WithVisibility(${getDisplayName(Component)})`;\n\n  return WithVisibility;\n};\n\nexport default withVisibility;\n","export const SIZES = {\n  MEDIUM: 'medium',\n  MOBILE: 'mobile',\n};\n\nexport const SCREEN_BREAK_POINTS = {\n  [SIZES.MOBILE]: 0,\n  [SIZES.MEDIUM]: 768,\n};\n","import { css } from 'styled-components';\n\nimport { SCREEN_BREAK_POINTS } from '@/constants/sizes';\n\nconst generateMediaQuery = sizes =>\n  Object.keys(sizes)\n    .filter(mediaKey => typeof sizes[mediaKey] !== 'undefined')\n    .map(mediaKey => `(${mediaKey}: ${sizes[mediaKey]}px)`)\n    .join(' and ');\n\nconst createMedia = sizes => (...args) => {\n  const mediaQuery = generateMediaQuery(sizes);\n\n  return css`\n    @media ${mediaQuery} {\n      ${css(...args)}\n    }\n  `;\n};\n\nconst media = Object.entries(SCREEN_BREAK_POINTS)\n  .map(([size, minWidth]) => ({\n    size,\n    minWidth,\n  }))\n  .sort((a, b) => a.minWidth - b.minWidth)\n  .reduce((acc, { size, minWidth }, index, array) => {\n    const nextBreakPoint = array[index + 1] || {};\n\n    return {\n      ...acc,\n      [size]: createMedia({\n        'min-width': minWidth,\n        'max-width': nextBreakPoint.minWidth,\n      }),\n    };\n  }, {});\n\nexport default media;\n","import { SIZES } from '@/constants/sizes';\n\nexport const THUMBNAIL_SIZES = {\n  [SIZES.MEDIUM]: {\n    WIDTH: 160,\n    HEIGHT: 98,\n  },\n  [SIZES.MOBILE]: {\n    WIDTH: 120,\n    HEIGHT: 60,\n  },\n};\n\nexport const CATEGORY_HEIGHT = 16;\nexport const CATEGORY_MARGIN_TOP = 10;\n\nexport const PLACEHOLDER_BG = '#f4f4f4';\nexport const PLACEHOLDER_BG_SHINE = 'rgba(255, 255, 255, 0.8)';\n","import React from 'react';\nimport { bool, func, number, string } from 'prop-types';\nimport styled, { css } from 'styled-components';\nimport { ellipsis } from 'polished';\n\nimport { SIZES } from '@/constants/sizes';\nimport media from '@/utils/media';\nimport { THUMBNAIL_SIZES, CATEGORY_HEIGHT, CATEGORY_MARGIN_TOP } from './constants';\n\nconst Thumbnail = styled.div.attrs(props => ({\n  style: {\n    backgroundImage: `url(${props.src})`,\n  },\n}))`\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-position: center;\n  pointer-events: none;\n  transition: transform 0.3s ease-out;\n  will-change: transform;\n`;\n\nexport const ThumbnailWrapper = styled.div`\n  width: ${THUMBNAIL_SIZES[SIZES.MEDIUM].WIDTH}px;\n  height: ${THUMBNAIL_SIZES[SIZES.MEDIUM].HEIGHT}px;\n  border: 5px solid ${props => props.theme.PANORAMAS_THUMBNAIL.BORDER_COLOR};\n  box-sizing: border-box;\n  overflow: hidden;\n\n  ${media.mobile`\n    width: ${THUMBNAIL_SIZES[SIZES.MOBILE].WIDTH}px;\n    height: ${THUMBNAIL_SIZES[SIZES.MOBILE].HEIGHT}px;\n  `};\n`;\n\nexport const Category = styled.span`\n  height: ${CATEGORY_HEIGHT}px;\n  margin-top: ${CATEGORY_MARGIN_TOP}px;\n  color: ${props => props.theme.PANORAMAS_THUMBNAIL.TEXT_COLOR};\n  font-size: 14px;\n  line-height: 1.2;\n\n  ${ellipsis()};\n`;\n\nconst normalCSS = css`\n  &:hover {\n    ${ThumbnailWrapper} {\n      border-color: ${props => props.theme.PANORAMAS_THUMBNAIL.BORDER_COLOR_HOVER};\n    }\n\n    ${Thumbnail} {\n      transform: scale(1.1);\n    }\n  }\n`;\n\nconst activeCSS = css`\n  ${ThumbnailWrapper} {\n    border-color: ${props => props.theme.PANORAMAS_THUMBNAIL.BORDER_COLOR_ACTIVE};\n  }\n`;\n\nexport const Wrapper = styled.div`\n  flex-shrink: 0;\n  text-align: center;\n  cursor: pointer;\n\n  &:not(:first-child) {\n    margin-left: ${props => props.gap || 0}px;\n  }\n\n  ${props => (props.isActive ? activeCSS : normalCSS)};\n`;\n\nconst PanoramasThumbnail = ({ src, category, isActive, handleClick, gap }) => (\n  <Wrapper onClick={handleClick} isActive={isActive} gap={gap}>\n    <ThumbnailWrapper>\n      <Thumbnail src={src} />\n    </ThumbnailWrapper>\n    <Category>{category}</Category>\n  </Wrapper>\n);\n\nPanoramasThumbnail.propTypes = {\n  src: string,\n  category: string,\n  isActive: bool,\n  gap: number,\n  handleClick: func,\n};\n\nexport default PanoramasThumbnail;\n","import React from 'react';\nimport styled, { keyframes } from 'styled-components';\n\nimport { Wrapper, ThumbnailWrapper, Category } from './PanoramasThumbnail';\nimport { PLACEHOLDER_BG, PLACEHOLDER_BG_SHINE } from './constants';\n\nconst shine = keyframes`\n  0% {\n    background-position: 0;\n  }\n\n  40%, 100% {\n    background-position: 100px;\n  }\n`;\n\nconst PlaceholderWrapper = styled(Wrapper)`\n  ${ThumbnailWrapper},\n  ${Category} {\n    background-size: 600px;\n    background-image: linear-gradient(\n      to right,\n      ${PLACEHOLDER_BG} 0px,\n      ${PLACEHOLDER_BG_SHINE} 40px,\n      ${PLACEHOLDER_BG} 80px\n    );\n\n    animation: ${shine} 1s ease-out infinite;\n    will-change: background-position;\n    cursor: default;\n  }\n\n  ${ThumbnailWrapper} {\n    border: none;\n  }\n\n  ${Category} {\n    width: 100%;\n  }\n`;\n\nconst Placeholder = React.forwardRef((props, ref) => (\n  <PlaceholderWrapper {...props} ref={ref}>\n    <ThumbnailWrapper />\n    <Category />\n  </PlaceholderWrapper>\n));\n\nexport default Placeholder;\n","import compose from '@/utils/compose';\nimport withFadeIn from '@/utils/withFadeIn';\nimport withVisibility from '@/components/Visibility/withVisibility';\nimport PanoramasThumbnail from './PanoramasThumbnail';\nimport Placeholder from './Placeholder';\n\nexport default compose(\n  withVisibility(Placeholder),\n  withFadeIn(Placeholder),\n)(PanoramasThumbnail);\n"],"sourceRoot":""}